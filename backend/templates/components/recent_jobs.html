<!-- Reusable Recent Jobs Component -->
<!-- Used by API endpoints to render recent jobs card for HTMX injection -->

<div class="card-header">
    <h2 class="card-title">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        Recent Jobs
    </h2>
    <a href="/queue" class="text-accent hover:text-accent-hover text-sm">View all →</a>
</div>
<div class="card-body">
    <table class="dashboard-table">
        <thead>
            <tr>
                <th>Job Name</th>
                <th>Current Stage</th>
                <th>Progress</th>
                <th>Status</th>
                <th>Started</th>
            </tr>
        </thead>
        <tbody>
            {% if jobs %}
                {% for job in jobs %}
                    <tr>
                        <td>
                            <div class="font-medium text-primary">{{ job.name }}</div>
                            <div class="text-sm text-muted">{{ job.size }} · {{ job.file_count }} files</div>
                        </td>
                        <td>
                            <div class="flex items-center gap-2">
                                <svg class="w-5 h-5 text-accent-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
                                </svg>
                                <span>{{ job.stage }}</span>
                            </div>
                        </td>
                        <td>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: {{ job.progress }}%"></div>
                            </div>
                            <div class="text-sm text-muted mt-1">{{ job.progress }}%</div>
                        </td>
                        <td>
                            <span class="status-badge {% if job.status == 'processing' %}active{% elif job.status == 'completed' %}success{% else %}inactive{% endif %}">
                                <span class="connection-dot {% if job.status == 'processing' %}connected{% else %}disconnected{% endif %}"></span>
                                {% if job.status == 'processing' %}Processing{% elif job.status == 'completed' %}Completed{% else %}Waiting{% endif %}
                            </span>
                        </td>
                        <td class="text-muted">{{ job.started_relative }}</td>
                    </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="5" class="text-center text-muted py-8">
                        <p>No recent jobs. Check back later.</p>
                    </td>
                </tr>
            {% endif %}
        </tbody>
    </table>
</div>
